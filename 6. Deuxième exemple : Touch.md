## Projet Clignotement d'une LED par "Touch"

Le NodeMCU32 dispose de nombreuses broches qui servent de "Touch pins", c'est à dire de touches capacitives remplaçant en quelque sorte des boutons mécaniques. Voir le "pinout" pour les broches associées. Par exemple, "Touch 0" est accessible via GPIO4. La fonction *touchRead(GPIO)* permet de lire la valeur.

**Objectifs :**

* Faire un montage en plaçant simplement un fil en l’air sur la broche GPIO4. Nous pincerons ce fil avec les doigts pour farie décroître les valeurs sur GPIO4. En dessous d’un seuil (threshold) fixé à l’avance, la Led bleue (GPIO2) s'allume, au-dessus, elle s'éteint. 
* Sous VS Code, créer un projet appelé "Touch". Le code de base du fichier *main.cpp* est donné ci-dessous.
* Modifier ce code afin de n'avoir qu'une fonction dans la boucle *loop()*, par exemple TouchDetect(touchPin, touchValue, threshold).
* Téléverser le code final, afficher les valeurs dans le moniteur série en pinçant le fil et vérifier le fonctionnement de la led bleue.


```javascript
#include <Arduino.h>

// set pin numbers
const int touchPin = 4;  // GPIO4
const int ledPin = 2;  // GPIO2 : Blue LED of the NodeMCU

// change with your threshold value
const int threshold = 25;
// variable for storing the touch pin value 
int touchValue;

void setup(){
  Serial.begin(115200);
  delay(1000); // give me time to bring up serial monitor
  // initialize the LED pin as an output:
  pinMode (ledPin, OUTPUT);
}
void loop(){
  // read the state of the pushbutton value:
  touchValue = touchRead(touchPin);
  Serial.print(touchValue);
  // check if the touchValue is below the threshold
  // if it is, set ledPin to HIGH
  if(touchValue < threshold){
    // turn LED on
    digitalWrite(ledPin, HIGH);
    Serial.println(" - LED on");
  }
  else{
    // turn LED off
    digitalWrite(ledPin, LOW);
    Serial.println(" - LED off");
  }
  delay(500);
}
```

Attention à mettre la même vitesse d'affichage dans votre code et votre configuration du miniteur série.
Par défaut, c'est 9600, sinon ajouter une ligne dans votre fichier platformio.ini : **monitor_speed = 115200**.

Affichage du moniteur série (et la led bleue s'allume en-dessous de 25 et s'éteint au-dessus) :

![image](https://user-images.githubusercontent.com/44494044/130097992-7c458cc6-af07-46c7-85d3-2dfc1c980e13.png)


## Déposer votre projet sur Github

vous pouvez créer un compte Github, si vous n'en avez pas, en allant sur le site : https://github.com/ et le publier en *public* ou *private*.

Les différentes étapes :
* créer un nouveau dépôt en cliquant sur news qui est en vert : create a new repository

![image](https://user-images.githubusercontent.com/44494044/130114629-a24f5578-4f8e-4604-8485-11acc1b23c6d.png)

Appelez-le *Test Touch*, mettez-le en *public* pour tester son accès, ajouter un fichier README qui est trés courant pour décrire votre projet.

![image](https://user-images.githubusercontent.com/44494044/130115247-344ec227-108a-439b-ab85-7716b82f25a3.png)

* cliquez sur *code* qui est en vert, puis Github Desktop pour cloner ce dépot sur votre disque dur (emplacement par défaut Documents/Github/Test-Touch).

* Ouvrez Visual Studio Code, Affichage -> SCM (Source Control Manager) pour le menu de contrôle de code source
* Cloner le dépôt avec Github et votre "repository" Test-Touoch

Quand votre projet est dans l'espace de travail, vous pouvez créer un compte Github, si vous n'en avez pas, en allant sur le site : https://github.com/ et le publier. Choisir **Publier sur Github**, votre dépôt prend par défaut le nom de votre projet. Il peut être privé ou public, par exemple :

![image](https://user-images.githubusercontent.com/44494044/130093650-7f39d625-7b4d-4b6b-907c-34e631f458ba.png)

Ensuite, en bas à droite, apparaît le résultat :

![image](https://user-images.githubusercontent.com/44494044/130094111-2b00a6c3-d766-4c54-a3c8-30c543bc21d5.png)

Vous pouvez vérifier le clonage de votre projet sur votre compte Github et ajouté un fichier README.md pour le commenter :

![image](https://user-images.githubusercontent.com/44494044/130094273-abc53bff-186e-4cd1-96dc-c0eda6c75100.png)
 


